> [!hint] 이벤트 스토밍?
> 모든 업무 유관련자가 모여 이벤트 중심으로 브레인 스토밍을 진행하는, 일종의 워크숍을 의미한다.
### 스티커로 표현하기
시스템을 사용하는 **사용자**는 원하는 바를 얻기 위해 시스템을 **조작**하고, 이러한 조작은 시스템의 **동작**을 유발한다. 동작의 결과로 사용자의 요청에 맞는 **데이터**가 생성되고, 이러한 데이터는 **UI** 형태로 사용자에게 제공된다. 화면에 노출된 결과를 바탕으로, 사용자는 다시 시스템을 조작해나가길 반복하게 된다. 이러한 핵심적인 요소들은 이벤트 스토밍은 워크숍 과정에서 다음과 같은 스티커로 표현된다.

| 요소      | 유형        | 색상           | 설명                |
| ------- | --------- | ------------ | ----------------- |
| **동작**  | 도메인 이벤트   | orange       | 발생한 사건 자체를 지칭     |
| **조작**  | 커맨드       | blue         | 도메인 이벤트를 유발시키는 명령 |
| **사용자** | 액터        | small yellow | 개인, 조직, 시스템 등의 역할 |
| **데이터** | 읽기 모델     | green        | 액터에게 제공되는 데이터     |
| **UI**  | 사용자 인터페이스 | white        | 스케치 형태의 레이아웃      |
추가적으로, 상술한 핵심 요소 이외의 것들은 아래와 같이 표현한다.

| 유형     | 색상     | 설명                                    |
| ------ | ------ | ------------------------------------- |
| 외부 시스템 | pink   | 도메인 이벤트가 호출하거나, 관계를 갖는 외부 시스템         |
| 애그리거트  | yellow | 도메인 이벤트와 커맨드가 처리하는 대상이자, 상태가 변경되는 데이터 |
| 정책     | lilac  | 이벤트 조건에 따라 진행되는 결정 사항을 지칭             |
| 핫스팟    | purple | 워크숍 도중에 발생한 의문, 질문, 또는 결정되지 않은 사항 전반  |
### 진행 순서
> [!hint] 전제 조건
> 이벤트 스토밍은 최소한의 요구사항 분석이 완료되었음을전제로 한다.

이벤트 스토밍 워크숍은 모든 유관련자가 모여 서로 소통하며 스티커를 붙여 나가며, 일반적으로 다음과 같은 순서를 따르게 된다.
1. 도메인 이벤트 도출
2. 외부 시스템 도출
3. 커맨드 도출
4. 핫스팟 도출
5. 액터 도출
6. 애그리거트 정의
7. 바운디드 컨텍스트 정의
8. 컨텍스트 매핑
### 비즈니스 관점의 도출
#### 도메인 이벤트의 도출
도메인 이벤트는 시간의 흐름에 따른 시스템의 동작을 의미하며, 이벤트 스토밍에서 최우선적으로 도출되어야 한다. 이 때, 데이터나 데이터 구조가 아닌 비즈니스 흐름에 초점을 맞추며 시간 흐름 순으로 왼쪽에서 오른쪽으로 흐르도록 작성한다. 또한, 같은 시점에 조건에 따라 대체적으로 발생할 수 있는 이벤트들은 세로로 가까이 배치하도록 한다.
일반적으로 도메인 이벤트는 비즈니스의 어떤 상태에 대한 생성, 변경 및 삭제에 해당하며 **화면이 아닌 비즈니스의 흐름에 따른 요소의 상태 변화에 집중하는 것이 바람직**하다.
#### 외부 시스템의 도출
도메인 이벤트 도출 과정에서 비즈니스의 흐름이 외부 시스템과의 연계를 전제할 경우, 해당 프로세스를 별도의 스티커로 작성한다. 이 경우, **실제 시스템 구현 범위를 벗어나더라도 기능 구현을 위해 필요한 시스템을 모두 도출해야 함에 주의**한다.
#### 커맨드의 도출
도메인 이벤트 도출이 완료된 경우, 각 이벤트를 동작하도록 하는 트리거인 커맨드를 도출할 필요가 있다.
커맨드는 도메인 이벤트를 동작하게 하는 동사 형태로 작성하며, **일반적인 커맨드는 도메인 이벤트로부터 쉽게 추출이 가능**하다.
또한, **하나의 커맨드로부터 여러 이벤트가 동시 또는 연속적으로 발생하는 식으로 여러 도메인 이벤트가 발생할 수도 있음에 주의**를 기울여야 한다.
#### 핫스팟의 도출
워크숍 과정에서 발생한 의문점 중 바로 해결할 수 없는 것들은 발견되는 즉시 별도의 스티커 형태로 작성한다.
#### 액터의 도출
커맨드까지 도출된 경우, 각 커맨드를 실행하는 사용자나 조직 등을 의미하는 액터를 도출해야 한다. 이 때, **액터는 반드시 추상적인 존재가 아닌 비즈니스를 수행하는 구체적인 역할을 고려하여 도출**한다. 이렇게 도출된 액터는 상대적으로 작은 스티커를 활용하여 커맨드의 아래에 작성하는 것으로 해당 액터가 커맨드를 조작한다는 점을 강조한다.
>[!memo] 액터를 활용한 검증
>액터까지 도출된 경우, '액터'가 '커맨드'하면 '도메인 이벤트'가 발생한다는 문장으로 치환해볼 수 있다.
>이러한 문장이 자연스럽게 읽히지 않는다면 커맨드 또는 도메인 이벤트를 변경하고나 새로 도출해야 한다.
#### 비즈니스 관점의 도출 완료하기
액터까지 도출된 현 시점에서, 전체적인 시스템을 조망해볼 수 있는 여건이 갖춰지게 된다. 이후의 모든 활동은 설계 수준에 영향을 주는 정의를 작성하게 된다.
### 설계 관점의 도출
#### 애그리거트의 도출
가장 작은 도메인 모델의 모듈 단위인 애그리거트는 커맨드와 도메인 이벤트가 영향을 주는 요소이며, 커맨드와 도메인 이벤트 사이에 스티커를 작성한다. **애그리거트 역시 구체적인 표현으로 도출할수록 이후의 컨텍스트 경계 식별에 큰 도움이 되므로 가능한 한 구체적으로 작성**한다.
#### 바운디드 컨텍스트 도출
애그리거트의 도출까지 완료된 시점에서, 어떤 애그리거트들은 이름이 같거나 유사한 점을 확인할 수 있다. 이렇듯 **이름이 동일하거나 유사한 애그리거트들은 다른 애그리거트들과 구분되도록 경계를 그리는 것으로 바운디드 컨텍스트를 도출**하게 된다.
바운디드 컨텍스트 역시 이름이 부여되며, 일반적으로 컨텍스트 내에 포함된 애그리거트들의 이름을 대표하는 것으로 정의하게 된다.
> [!warning] 주의사항
> 일부 애그리거트는 이름이 완전히 다르더라도 비즈니스의 흐름에 따라 하나의 컨텍스트로 정의될 수 있다.
#### 정책의 도출
**정책은 도메인 이벤트를 뒤따르는 반응적인 비즈니스 로직으로, 또 다른 커맨드를 조작하게 하는 특징**을 갖는다. 다시 말해 정책은 도메인 이벤트와 커맨드 사이에 존재하며, **정책에 의해 호출되는 커맨드는 다른 컨텍스트에 존재할 수도** 있다. 바꿔 말하자면, **정책을 도출하는 것으로 바운디드 컨텍스트 간의 관계를 식별**할 수 있다.
#### 컨텍스트 매핑하기
**정책에 의한 바운디드 컨텍스트 간의 관계 도출이 완료된 경우, 호출 방향을 고려하여 이를 컨텍스트 맵으로 표현**할 수 있다. 