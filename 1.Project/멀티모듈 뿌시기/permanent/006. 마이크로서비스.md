> 소프트웨어에서 모듈화는 언제나 중요했으며, 기능은 언제나 응집성 있고 다른 모듈에 의존성이 낮아야 한다.
> 마이크로서비스 역시 마찬가지로, 시스템은 역할이 분명한 마이크로서비스로 구성되어야 한다.

### 마이크로서비스 도출하기
> [!hint] 의존성은 낮게
> 마이크로서비스가 비즈니스 변화에 대응하면서도 독립적으로 변경 및 배포되기 위해서는 다른 서비스에 의존하지 않아야 한다.

#### DDD와 전략적 설계
DDD에서는 데이터를 기능과 분리하여 식별하는 대신, **문제 영역인 하위 도메인마다 별도의 도메인 모델을 정의하는 방식**을 택한다. 각 도메인 모델은 임의의 업무에 특화된 유비쿼터스 언어로 정의되고, 그 업무 자체에 특화된 개념으로 구성된다.
DDD의 전략적 설계에서는 **분리된 도메인 모델에 의해 다른 컨텍스트와 구별되는 경계 자체를 비즈니스적으로 응집성을 갖는 컨텍스트를 바운디드 컨텍스트로 구분하고, 이러한 바운디드 컨텍스트는 각각 마이크로서비스를 식별하기 위한 단위로서 사용**될 수 있다.

#### 도메인과 서브도메인
> [!hint] DDD와 서브도메인
> DDD에서는 하나의 큰 도메인으로부터 전략적으로 중요한 것들을 가려내어 중요도에 따라 도메인을 나누고, 각 도메인을 하나씩 해결하는 방법을 근본으로 삼는다.

해결하고자 하는 문제의 영역인 도메인은 논리적으로 구분되는 여러 하위 도메인으로 나뉘어졌을 때 쉽게 이해할 수 있으며, 이는 곧 **많은 개념이 하나로 얽힌 복잡한 비즈니스일수록 여러 논리적인 서브도메인으로 분류해야함을 의미**한다. 또한, 서브도메인은 그 중요도에 따라 다음과 같은 유형으로 구분되어질 수 있다.
1. 핵심 서브도메인: 다른 **경쟁 제품과 차별화하기 위한 비즈니스 영역으로, 가장 높은 우선 순위**를 갖는다.
2. 지원 서브도메인: 핵심은 아니지만 비즈니스에 필수적인 영역에 해당한다.
3. 일반 서브도메인: 비즈니스적으로 특화된 부분도 아니지만 전체 솔루션에 필요하며, 기존 제품으로 대체가 가능한 영역에 해당한다.

#### 유비쿼터스 언어의 중요성
도메인에서는 도메인 전문가의 비즈니스 언어와 개발자의 언어가 달라지기 쉽기에, **같은 단어나 용어라도 어떠한 맥락 하에서 의미가 다르게 해석될 수 있다는 점을 인지하고 이를 바탕으로 한 용어 사전을 정의**해야할 수 있다.
DDD에서는 이렇듯 임의의 도메인에서 해당 도메인의 의도를 명확히 반영하고 핵심 개념을 잘 전달할 수 있는 언어를 유비쿼터스 언어로 지칭하며, 모든 이해관계자가 공통의 언어를 사용하여 용어에 따른 오해를 없앨 것을 권장한다. 즉, 유비쿼터스 언어는 세부적인 도메인의 특정 업무와 관련된 인원 간에 자율적으로 정의된 개념이다.
> [!note]
> 결제 도메인의 고객과 배송 도메인의 고객은 다른 의미를 갖는다.
> 이렇듯 유비쿼터스 언어는 특정한 도메인의 업무 개념을 표현하는 언어에 해당한다.

#### 도메인 모델 정의하기
> 도메인 모델은 비즈니스 맥락에서 통용되는 개념들의 관계를 정의하는 모델로, 도메인과 관련된 모든 유관련자들이 비즈니스를 이해하기 위한 기본 모형이다.

**복잡한 도메인 모델을 구성하다보면 도메인 모델의 한 부분에서 사용하는 언어와 다른 곳에서 사용되는 언어와 상이해지는 경계를 발견할 수 있으며 이를 바운디드 컨텍스트로 정의**할 수 있다. 결국, 바운디드 컨텍스트는 일종의 닫힌 원으로 표현되어 하나의 도메인 모델을 표현하게 된다.
새로운 구성원이 합류하더라도 소스코드 상의 도메인 모델을 이해할 수 있다면 그 즉시 도메인과 서비스에 대한 동일한 비전을 공유할 수 있고, 이를 기반으로 서비스는 지속적으로 성장해나갈 수 있다. 이러한 DDD의 특징은 마이크로서비스와 잘 어울리며, DDD를 적절히 활용할 경우 양질의 마이크로서비스를 도출해낼 수 있다.

#### 컨텍스트 매핑
하나의 커다란 도메인은 여러 개의 바운디드 컨텍스트로 분리될 수 있으며, 이러한 바운디드 컨텍스트들은 비즈니스를 위해 서로 상호작용해야할 수 있다. 이러한 **컨텍스트 간의 의존 관계를 컨텍스트 매핑으로 지칭**하며, 모델 상에서는 두 컨텍스트 간에 이어진 선으로 표현하게 된다.
이렇듯 시스템을 구성하는 컨텍스트 간의 매핑 관계는 다이어그램인 컨텍스트 맵으로 표현될 수 있으며, 상세하게는 다음과 같은 컨텍스트 매핑 패턴들이 사용될 수 있다.
1. 공유 커널
2. 소비자와 공급자
3. 준수자
4. 충돌 방지 계층
5. 공개 호스트 서비스
6. 발행된 언어
이러한 컨텍스트 매핑 패턴을 기반으로 정의된 **컨텍스트 맵은 커다란 하나의 도메인 여러 개의 바운디드 컨텍스트로 식별하고, 이들 간의 관계를 다이어그램의 형태로 표현**하게 된다.