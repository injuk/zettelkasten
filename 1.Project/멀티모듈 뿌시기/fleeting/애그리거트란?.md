> 서로 연관이 있는 [[엔티티란?|엔티티]]와 [[밸류 타입이란?|밸류 타입]]을 하나로 묶는 개념적인, 캡슐화된 단위
### 해설
- [[도메인이란?|도메인]]과 [[도메인 모델이란?|도메인 모델]]은 프로젝트가 성숙함에 따라 함께 커지는 경향이 었고, 점차 복잡해지기 마련이다.
	- 이 경우, 복잡성이 높아질수록 개발자는 도메인 전체가 아닌 특정한 엔티티 또는 밸류 타입에만 초점을 맞추게 된다.
- 애그리거트는 서로 연관이 있는 엔티티와 밸류 타입을 모으는 캡슐화된 단위로서, 도메인 전체를 이해하는 데에 큰 도움을 준다.
- **애그리거트는 자신에게 포함된 모든 객체를 관리하는, 일종의 파사드로서의 [[루트 엔티티란?|루트 엔티티]]를 포함**한다.
- 하나의 애그리거트에 속한 구성 요소들은 일반적으로 동일한 생명 주기를 갖는다.
### 애그리거트 정의하기
- **애그리거트를 정의하는 일반적인 기줄은 도메인의 핵심적인 규칙과 요구사항**이다.
- 예를 들어, 동일한 규칙에 의해 함께 생성되는 객체들은 동일한 애그리거트에 속할 가능성이 높다.
### 주의사항
- 애그리거트는 일종의 경계를 갖기에 **하나의 애그리거트에 속한 객체는 다른 애그리거트에 속하지 않는다**.
- 대부분의 경우에 **하나의 애그리거트는 [[루트 엔티티란?|단일 엔티티]] 객체와 여러 밸류 타입 객체로 구성**된다.
	- 반면, 루트 엔티티 이외의 엔티티가 존재한다면 밸류 타입을 엔티티로 승격시킨 것은 아닌지 확인하는 것이 바람직하다.
	- 그럼에도 **엔티티가 확실하다면, 별도의 애그리거트로 추출해야할지 확인**한다.
- 하나의 트랜잭션에서는 하나의 애그리거트만을 수정하며, 둘 이상의 애그리거트를 수정하는 경우에는 [[응용 영역]]의 서비스에서 처리한다.
- **도메인 규칙과 관련된 코드를 억지로 하나의 애그리거트 내에서 구현하려 끼워 맞추기보다는 [[도메인 서비스란?|도메인 서비스]]를 활용**한다.

---
#DDD #용어 